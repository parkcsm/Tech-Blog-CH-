**요구사항 정의 및 분석서**
=======================================
>작성날짜 : 2019-03-31

**정의**
=======================================
> 회원가입 / 로그인 /로그아웃 - Q1

> 회원 종류와 권한 - Q2

> 게시판 생성 / 수정 / 삭제 / 관리 / 기본디자인 - Q3

> 게시글 읽기 / 작성 / 수정 / 삭제 / 검색 / 관리 - Q4

> 댓글 작성 / 수정/ 삭제 / 관리 - Q5

> 방명록 생성 / 수정 / 삭제 - Q6

**분석**
=======================================
>회원가입 / 로그인 / 로그아웃 - Q1

## 회원가입
1. 글을 보기 위한 별도의 회원가입은 필요 없다.
2. 구글 아이디로 로그인을 통해 게시글을 남기거나, 댓글을 달 수 있다.

## 로그인
1. 구글 로그인(API)를 통해 회원을 구분한다. (Child-Lion-Camel-Owl)
    * 로그인을 하면 회원 등급에따라 오른쪽 상태창 위에 Child - Lion - Camel이 표시된다.
    * 로그인한 기록을 DB-> 회원정보-로그인정보-‘로그인한 구글 이메일’, ‘회원 구분(Child,Lion,Camel)’, ‘로그인 또는 로그아웃 시간’으로 기록한다.
    * 활동 기록또한 DB-> 회원정보 -활동기록정보- ‘구글 이메일’, ‘회원 구분(Child,Lion,Camel)’, ‘활동 종류(게시글,댓글)’,’활동 내용(게시글이라면 제목포함 텍스트만,댓글이라면 댓글 내용만)’
    * 로그인을 하지 않는 회원의 계급은 Owl(올빼미, 감시자)로 한다.
    * Child - Lion - Camel로 한 이유 : 니체가 했던 말중에 인간은 모든 고뇌를 짊어지고 사는 Camel에서, 자신과 맞서는 상대를 집어삼키는 Lion, 누구도 될 수 있는 창조성 그 자체인 Child순으로 진화한다는 것에서 착안
2. 로그인 없이, 방문한 익명사용자의 계급은 Owl로 한다. Owl은 모든 글과 댓글을 읽을 수 있으나, 댓글이나 방명록을 남기기 위해서는 구글 로그인을 해서 최소 Camel 계급을 얻어야 한다.
3. 쿠키와 세션을 어떻게 정의할 건지는 차후 논의하기로 한다.
    * 그냥 로그인을 할 때는 세션을 자동으로 연결한다. 연결된 세션은 시간이 지나면 자동으로 끊어진다.
    * 자동로그인을 할때는 쿠키와 세션을 모두 연결한다.

## 로그아웃 
1. 로그아웃을 누르면 세션과, 쿠키가 사라진다.
    * 쿠키는 한달이 지나면 자동으로 삭제 된다.
    * 여기서 말하는 쿠키는 블로그 사이트에  1달 이내에 성공적으로 로그인 했으며, 로그아웃을 누르거나, 30일의 쿠키 만료기간이 끝나기 전까지는 해당 쿠키를 가지고 있으면, 해당 아이디를 가진 구글아이디가 로그인한 걸로 간주한다.

>회원 종류와 권한 ( Child / Lion / Camel / Owl ) - Q2

## Child(관리자)
1. 특정 구글 아이디를 Lion으로 임명할 수 있다.
    * 댓글에 있는 구글 아이디로 초청장 메일을 보낸다.
    * 방명록을 통해 Lion을 공개모집할 수 있다.
        + 이부분은 나중에 첨가할 예정.
2. 게시판을 편집할 수 있는 권한이 있다. 
    * 게시판의 등록, 수정, 삭제
    * 게시판 내 디자인,페이징 방식 변화.
        + 이부분은 나중에 첨가할 예정.
3. 모든 Lion의 기본 권한을 가진다.
4. Child는 한 명이며, Lion을 최대 10명까지 둘 수 있다.
    * 현재 Lion 리스트를 볼 수 있는 페이지가 있다. 
    * 해당 페이지에서 특정 Lion을 Lion 목록에서 제외 시킬 수 있다.
    * 해당 페이지에서 특정 1인을 Lion을 Child로 만들고, 자신은 Camel이 될 수 있다.
## Lion(글 작성자)
1. 게시판에 글을 작성하고 수정, 삭제할 수 있다. (단, 수정을 할 때에는 Lion이건 Child이건 자신의 글만 수정이 가능하다.)
2. 모든 Camel의 기본 권한을 가진다.

## Camel(댓글러)
1. 댓글과 방명록을 남길 수 있다.
    * 방명록 이부분은 나중에 첨가할 예정.
2. Child의 초대장을 받거나, Lion 공개 모집을 통해 Lion이 될 수 있다.
    * 로그인을 했을 때, 개인 구글 이메일이 공개되기 때문에, Child는 해당 이메일로 Lion 초대 메일을 보낼 수 있다. 확인, 수락을 누르면, 다음에 로그인할 때마다 해당 아이디는 Lion으로 로그인된다.
        + 일단은 바로 Lion으로 승격시키는 걸로 하고, 이부분은 나중에 첨가할 예정.
3. Lion 공개모집에서 테스트를 통해 Lion으로 선발 될 수 있다.
    * Lion 공개모집은, Child가 남긴 특정 주제에 대해 자신의 생각을 논리정연하게 표현하고, 이를 다수의 참여자가 평가해서 Lion으로 선발한다. Child 및 Lion의 평가점수가 비중이 높지만, 로그인한 Camel들의 평가도 평가에 반영하도록 한다.
        - 일단은 바로 Lion으로 승격시키는 걸로 하고, 이부분은 나중에 첨가할 예정.
4. 모든 Owl의 기본 권한을 가진다.

## Owl(관찰자)
1. 글, 댓글, 방명록을 읽을 수 있다.
    * 방명록은 나중에 구현 예정.
2. 구글 로그인을 통해, Camel이 될 수 있으며, 이 때부터 댓글과, 방명록을 남기는 것이 가능하다.

> 게시판 생성 / 수정 / 삭제 / 관리 / 기본디자인 - Q3

## 게시판 생성
1. 게시판을 생성하기 위해 게시판명, 게시판 디자인, 페이징 방식을 선택해야 한다.
2. 게시판 디자인, 페이징 방식등은 미리 여러가지를 선택할 수 있도록, 게시판 관리페이지의 코드를 작성한다. 
3. 생성된 게시판은 DB 게시판정보-’게시판명’, ‘바꾼 디자인’으로 기록되어 저장된다.

## 게시판 수정, 삭제
1. Child(관리자)는 게시판의 이름과 게시판 디자인을 수정, 삭제할 수 있다.
2. 수정,삭제시 DB의 게시판 테이블의 게시판명과 디자인이 수정, 삭제된다.
3. 게시판을 삭제할 경우, 해당 게시판 명으로 등록된 게시글들은 모두 함께 삭제된다.

## 게시판 관리
1. 게시판 관리페이지는 Child(관리자)에게만 보인다.
2. Child(관리자)는 게시판 관리 페이지를 통해, 게시판을 생성할 수 있다.
3. Child(관리자)는 게시판 성격에 맞지 않는 게시글들을 다른 게시판으로 임의 이동시킬 수 있다. 
    * 해당 게시판에는 ‘게시판의 성격에 맞지 않은 글이라 다른 게시판으로 이동시켰습니다’라는 댓글이 자동으로 남겨진다.

## 게시판 기본 디자인
1. 게시판의 기본 디자인과 페이징은 다음링크의 다음 이미지를 참고한다.

    * http://woowabros.github.io
    * 좌측은 모든 게시판 카테고리의 최신글 20개
    * 우측상단은 게시판별 카테고리와 글의 수

     ![Alt text](/images/1.Requirement_Definition_Document/basic_design.jpg "Basic_Design")

    * 게시판을 클릭해서 들어가면 아래처럼 해당 글만 따로 나온다.

    ![Alt text](/images/1.Requirement_Definition_Document/basic_design2.jpg "Basic_Design2")

> 게시글 읽기 / 작성 / 수정 / 삭제 / 검색 / 관리 - Q4

## 게시글 읽기
1. 이용자가 게시글을 읽을 때마다 조회수가 올라간다. (하루 1개)
    * 구글로그인을 하지않은 Owl가 읽을 때도 IP로 대상자를 구분해서, 조회수가 올라갈 수 있게 하고 싶은데, 이 부분은 차후 생각해보아야한다.
     * 모든 사람(Child-Lion-Camel-Owl)이 게시글을 읽을 수 있다.
2. 게시글을 선택할 때, 구글 계정의 프로필사진과 이름, 이메일 등이 우아한 형제들 블로그의 이미지처럼 표시될 수 있도록 해야 한다.
3. 클릭한 게시글의 정보를  DB에서 불러온다. 이미지 같은 경우에는 서버URL과 동영상이나 이미지가 저장되어있는 경로를 활용하여 불러온다.
    * 이 때, 동영상이나, 이미지의 이름이 중복되는 것을 방지하기위해, 동영상이나 이미지의 제목 String값에 올린사람  시간데이터를 반드시 추가해준다.
    * 위 과정이 복잡해지면 API를 사용하는 것을 고려한다.
    * DB는 대형서비스를 사용할 것이 아니기 때문에, 무난하고 무료인 MySql을 사용하도록 한다.
4. 게시글에는 몇개의 댓글이 달렸는지 확인할 수 있고, 이 숫자는 댓글과 대댓글을 모두 합친 숫자이다.
## 게시글 작성
1. 게시글은 Child, Lion으로 식별된 Google Email만 작성할 수 있다.
2. 게시글을 작성할 때는 게시판 명(필수), 제목(필수), 내용(필수), 사진 및 동영상 첨부(선택)로 작성한다.
3. 작성된 게시글 내용은 DB->게시글정보에 ‘id-number’,‘작성자’,‘게시판명’,’제목’,’내용’,’시간’,’사진이름’,’동영상이름’으로 저장한다.
    * 사진과 동영상을 여러개 첨부할 경우 Tokenizer를 활용해서, 해당 사진과 동영상의 이름을 ‘/%/’로 구분지어서 순서대로 해당 칼럼에 늘어뜨려서 저장한다. (불러올때는 불러오는 코드에 Tokenizer를 구분하는 코드를 넣어준다.)
    * 사진과 동영상의 실제 저장 경로는 서버 OS(Linux)에 이미지나, 동영상 폴더를 따로 만들어서 저장한다.
    * 글 중간중간에 사진을 첨부한 순서대로 보이게 할건데, 이것을 어떻게 처리할지 고민해봐야한다. 해당 API가 존재하면 찾아서 꼭 쓰자. 직접 구현하기에는 너무 손이 많이 간다.
## 게시글 수정
1. 게시글을 수정할 경우, 게시글 작성과 같은 순서로 DB에 수정된 내용이 등록되도록 한다.
## 게시글 삭제
1. 게시글이 삭제될 때에는, DB에서 해당 게시글의 내용이 모두 삭제되도록 하고, 첨부한 이미지와 동영상도 OS(Linux)에서 모두 삭제되도록 한다.
## 게시글 검색
1. 게시글을 검색할 때는 게시판을 먼저 선택하고, 전체 혹은 제목, 내용, 글쓴이를 선택해서 검색할 수 있도록 한다.
## 게시글 관리
1. 위의 내용들은 모두 게시판을 통해서 접근해서 게시글을 관리하는 방법이다. 하지만, Child(관리자)와 Lion(글쓴이)은 직접 게시글 관리 페이지로 접근해서 게시글을 관리할 수 있다. 
    * 이렇게 관리하는 방법이 조금 더 편리하기 때문이다Child(관리자)가 모든 게시글을 대상으로 삭제나 숨김활동을 할때, Lion(글쓴이)이 자기가 쓴 게시글들을 중심으로 삭제나 숨김활동을 할 때 사용된다. 
    * 왜냐하면, Owl(관찰자)이 보는 화면으로 관리하기에는 글들을 하나하나 확인하는것보다 관리페이지가 조금 더 간편하기 때문이다. 단, 게시글을 수정하기 위해서는 모두 Child나 Lion 모두 자신의 글만 수정이 가능하다.

> 댓글 작성 / 수정/ 삭제 / 관리 - Q5

## 댓글 작성
1. 댓글 작성은 위에서도 언급했듯이, 구글 로그인을 한 아이디(Child-Lion-Camel)만 허용된다.
2. 댓글 작성을 했을 때, DB->댓글정보에 ’댓글 id’,‘해당게시글의 id’,’작성자’,’댓글내용’,’시간’,’대댓글 id’가 저장된다.
3. 댓글아래 여러개의 댓글이 작성 가능하며, ‘대댓글 id’ 칼럼에 대댓글이 적힌 댓글의id가 저장된다.
## 댓글 수정
1. 댓글 작성과 마찬가지로 구글로그인이 되있는 작성자는, 본인이 남긴 댓글만 수정이 가능하다.
2. 댓글 수정시, ‘댓글 id’, ‘해당 게시글 id’, ‘작성자’,’대댓글 id’를 제외한 ‘댓글내용’과  ‘시간만’ 수정이 된다.
## 댓글 삭제
1. 댓글 작성, 수정과 마찬가지로 구글로그인이 되어있는 작성자는, 본인이 남긴 댓글만 수정이 가능하다.
2. 댓글을 삭제할 때, 만약 대댓글이 없는 댓글이라면, DB->댓글정보에서 해당 댓글의 정보가 삭제된다.
3. 댓글을 삭제할 때, 만약 대댓글이 남겨져있는 댓글이라면, DB->댓글정보에서 ‘작성자’가 null값으로 바뀐다. 그리고 ‘댓글내용’이 ‘작성자가 삭제한 댓글입니다’로 수정된다. 이렇게 하는 이유는 대댓글을 남긴사람들이 어떤 댓글에 대해 대댓글을 남겼지만, 중간에 댓글이 사라진 경우라는 것을 명시하기 위함이다.
## 댓글 읽기
1. 댓글을 읽기 위해서는 해당 게시글의 맨 하단으로 내려가야하며, 댓글을 남기면 로그인한 구글 닉네임 혹은 이름과 프로필 사진과 댓글 내용, 댓글을 단 시간 등이 띄워져 있고, 시간 순서대로 위에서 아래로 달린다.
## 댓글 관리
1. 위의 내용들은 모두 게시판을 게시글에 통해서 접근해서 직접 댓글을 관리하는 방법이다. 하지만, Child(관리자)와 Lion(글쓴이)은 직접 댓글 관리 페이지로 접근해서 댓글을 관리할 수 있다.
    * 이렇게 관리하는 방법이 조금 더 편리하기 때문이다. Child(관리자)가 모든 댓글을 대상으로 삭제활동을 할때, Lion(글쓴이)이 자기가 쓴 게시글들을 중심으로 삭제활동을 할 때 사용된다.
    * 왜냐하면, Owl(관찰자)이 보는 화면으로 댓글을 관리하기 위해 글들을 하나하나 확인하는것보다, 댓글 관리페이지가 조금 더 간편하기 때문이다. 단, 댓글을 수정하기 위해서는 모두 Child나 Lion 모두 자신의 댓글만 수정이 가능하다.

> 방명록 생성 / 수정 / 삭제 / 읽기 - Q6
## 방명록 생성
1. 구글로그인을 통해 누구나 방명록을 남길 수 있다. DB->방명록정보에서 ‘작성자’,’방명록내용’,’시간’정보가 저장된다.
    + 이 부분은 나중에 첨가할 예정.
## 방명록 수정
1. 방명록을 수정하면, DB->방명록 정보에서 ‘방명록내용’ 수정이 가능하다.
    + 이 부분은 나중에 첨가할 예정.
## 방명록 삭제
1. 구글로그인을 통해 로그인한 누구나 방명록을 삭제할 수 있다. DB->방명록 정보에서 ‘작성자’,’방명록내용’,’시간’정보가 저장된다.
    + 이 부분은 나중에 첨가할 예정.
## 방명록 읽기
1. 방명록은 아래부터 하나하나 쌓이고, 페이징을 활용해(1~10) 한개의 페이지당 20개의 방명록이 쌓인다.
    + 이 부분은 나중에 첨가할 예정.
## 방명록 관리
1. 방명록 관리, Child가 방명록을 수정할 수 있도록 관리한다.
    + 이 부분은 나중에 첨가할 예정.

**카드**
=======================================
> 회원가입 / 로그인 /로그아웃 - Q1
1. 로그인

    ![Alt text](/images/1.Requirement_Definition_Document/Q1-1.jpg "Q1-1")
    * 회원가입은 존재하지 않으므로 건너 띄웠음.

2. 로그아웃

    ![Alt text](/images/1.Requirement_Definition_Document/Q1-2.jpg "Q1-2")

> 회원 종류와 권한 - Q2
1. 회원 종류별 권한 전반

    ![Alt text](/images/1.Requirement_Definition_Document/Q2.jpg "Q2")

> 게시판 생성 / 수정 / 삭제 / 관리 / 기본디자인 - Q3
1. 게시글 생성 / 수정 / 삭제 / 관리

    ![Alt text](/images/1.Requirement_Definition_Document/Q3-1,2,3,4.jpg "Q3-1,2,3,4")

2. 게시판 기본 디자인

    ![Alt text](/images/1.Requirement_Definition_Document/Q3-5.jpg "Q3-5")

> 게시글 읽기 / 작성 / 수정 / 삭제 / 검색 / 관리 - Q4
1. 게시글 읽기 

     ![Alt text](/images/1.Requirement_Definition_Document/Q4-1.jpg "Q4-1")

2. 게시글 작성, 수정, 삭제 

     ![Alt text](/images/1.Requirement_Definition_Document/Q4-2,3,4.jpg "Q4-2,3,4")

3. 게시글 검색 

     ![Alt text](/images/1.Requirement_Definition_Document/Q4-5.jpg "Q4-5")

4. 게시글 관리 

     ![Alt text](/images/1.Requirement_Definition_Document/Q4-6.jpg "Q4-6")

> 댓글 작성 / 수정/ 삭제 / 관리 - Q5
1. 댓글 작성, 수정, 삭제 

     ![Alt text](/images/1.Requirement_Definition_Document/Q5-1,2,3.jpg "Q5-1,2,3")

2. 댓글 관리

     ![Alt text](/images/1.Requirement_Definition_Document/Q5-4.jpg "Q5-4")


> 방명록 생성 / 수정 / 삭제 / 관리 - Q6
1. 방명록 생성, 수정, 삭제 / 관리

     ![Alt text](/images/1.Requirement_Definition_Document/Q6-1,2,3.jpg "Q6-1,2,3")

**피드백**
=======================================

![Alt text](/images/1.Requirement_Definition_Document/Comment1.jpg "Comment1")

![Alt text](/images/1.Requirement_Definition_Document/Comment2.jpg "Comment2")

![Alt text](/images/1.Requirement_Definition_Document/Comment3.jpg "Comment3")
   
![Alt text](/images/1.Requirement_Definition_Document/Comment4.jpg "Comment4")

![Alt text](/images/1.Requirement_Definition_Document/Comment5.jpg "Comment5")

![Alt text](/images/1.Requirement_Definition_Document/Comment6.jpg "Comment6")

![Alt text](/images/1.Requirement_Definition_Document/Comment7.jpg "Comment7")

![Alt text](/images/1.Requirement_Definition_Document/Comment8.jpg "Comment8")


